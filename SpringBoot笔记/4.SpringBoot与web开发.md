[TOC]



-----



使用springBoot：

* **1.创建springboot应用，选中需要的场景**
* **2.SpringBoot已经默认将这些场景创建好了，只需要在配置文件中指定少量的配置就可以运行起来**
* **3.自己编写业务代码；**

**自动配置原理？**

xxxAutoConfiguration是给我们用来自动配置的注解，
xxxProperties：配置类

# 1.SpringBoot对静态资源的映射规则

```java

public void addResourceHandlers(ResourceHandlerRegistry registry) {
            if (!this.resourceProperties.isAddMappings()) {
                logger.debug("Default resource handling disabled");
            } else {
                Duration cachePeriod = this.resourceProperties.getCache().getPeriod();
                CacheControl cacheControl = this.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();
                if (!registry.hasMappingForPattern("/webjars/**")) {
                    this.customizeResourceHandlerRegistration(registry.addResourceHandler(new String[]{"/webjars/**"}).addResourceLocations(new String[]{"classpath:/META-INF/resources/webjars/"}).setCachePeriod(this.getSeconds(cachePeriod)).setCacheControl(cacheControl).setUseLastModified(this.resourceProperties.getCache().isUseLastModified()));
                }

                String staticPathPattern = this.mvcProperties.getStaticPathPattern();
                if (!registry.hasMappingForPattern(staticPathPattern)) {
                    this.customizeResourceHandlerRegistration(registry.addResourceHandler(new String[]{staticPathPattern}).addResourceLocations(WebMvcAutoConfiguration.getResourceLocations(this.resourceProperties.getStaticLocations())).setCachePeriod(this.getSeconds(cachePeriod)).setCacheControl(cacheControl).setUseLastModified(this.resourceProperties.getCache().isUseLastModified()));
                }

            }
        }

```

* 1所有的/webjars/** 的资源都去class:/META-INF/resources/webjars/找资源；
* webjars：以jar包的方式来引入静态资源，参考网址[webjar:](https://www.webjars.org/)
* ![image-20210101203346353](https://bevishe.oss-cn-hangzhou.aliyuncs.com/img/image-20210101203346353.png)

```xml
localhost:8080/webjars/jquery/3.5.1/jquery.js
```

![image-20210101203715453](https://bevishe.oss-cn-hangzhou.aliyuncs.com/img/image-20210101203715453.png)

* 2."/**"访问当前项目的任何资源（静态资源的文件夹）

* ```
	"classpath:/META-INF/resources/"
	"classpath:/resources/"
	"classpath:/static"
	"classpath:/public"
	```

* 3.欢迎页；静态资源文件下的所有index页面；被“/**”映射；

	localhost：8080/   找index页面

* 4.所有的**/favicon.ico都在静态资源文件夹下面找,标题的图标

# 2.模板引擎

JSP，Velocity，Freemarker,Thymeleaf

![image-20210101205841258](https://bevishe.oss-cn-hangzhou.aliyuncs.com/img/image-20210101205841258.png)

SpringBoot推荐的是：thymelef，语法简单，功能强大

## 1.引入thymelef

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-thymeleaf</artifactId>
</dependency>
```

## 2.Thymeleaf的语法和使用

```java
@ConfigurationProperties(
    prefix = "spring.thymeleaf"
)
public class ThymeleafProperties {
    // 只要我们将html页面放到classpath:/templates,Thymeleaf就会给我们自动进行渲染
    private static final Charset DEFAULT_ENCODING;
    public static final String DEFAULT_PREFIX = "classpath:/templates/";
    public static final String DEFAULT_SUFFIX = ".html";
    private boolean checkTemplate = true;
    private boolean checkTemplateLocation = true;
    private String prefix = "classpath:/templates/";
    private String suffix = ".html";
    private String mode = "HTML";
    private Charset encoding;
    private boolean cache;
    private Integer templateResolverOrder;
    private String[] viewNames;
    private String[] excludedViewNames;
    private boolean enableSpringElCompiler;
    private boolean renderHiddenMarkersBeforeCheckboxes;
    private boolean enabled;
    private final ThymeleafProperties.Servlet servlet;
    private final ThymeleafProperties.Reactive reactive;
```

语法查看thymeleaf的官方网站

* 1.导入thymeleaf的命名空间

	``<html lang="en" xmlns:th="http://www.thymeleaf.org">``

## 3.语法规则

* 1·th:text 改变当前元素里面的内容

	使用th改变任意html的元素值

* 2.表达式

	```properties
	${} #获取比变量值
		1.获取对象的属性，调用方法
		2.获取内置的基本对象 ${session.foo}
		3.内置的工具对象：
	*{}  # 变量的选择表达式 和${}在功能上是一样的，补充了一些功能，配置th:object来使用的
	#{} 获取国际化内容的
	@{}：定义url链接的
	~{}：片段引用的表达式
		<div th:insert="~{commons:main}">
		<div>
	```

	![补充功能](https://bevishe.oss-cn-hangzhou.aliyuncs.com/img/image-20210102192144425.png)



Spring MVC Auto-configuration

以下是springboot对springmvc的自动配置

Spring Boot provides auto-configuration for Spring MVC that works well with most applications.

The auto-configuration adds the following features on top of Spring’s defaults:

- Inclusion of `ContentNegotiatingViewResolver` and `BeanNameViewResolver` beans.
- 自动配置了视图解析器（根据方法的返回值得到视图对象view，视图对象决定），视图决定对象如何渲染，转发，重定向
	ContentNegotiatingViewReslver
- Support for serving static resources, including support for WebJars (covered [later in this document](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-spring-mvc-static-content))).
- Automatic registration of `Converter`, `GenericConverter`, and `Formatter` beans.
- Support for `HttpMessageConverters` (covered [later in this document](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-spring-mvc-message-converters)).
- Automatic registration of `MessageCodesResolver` (covered [later in this document](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-spring-message-codes)).
- Static `index.html` support.
- Automatic use of a `ConfigurableWebBindingInitializer` bean (covered [later in this document](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-spring-mvc-web-binding-initializer)).