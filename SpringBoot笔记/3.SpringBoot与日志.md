# 1.日志框架

开发一个大小框架

* 1.System.out.println();将关键数据打印在控制台，写在一个文件里面

* 2.框架来记录系统里面的一些运行时信息；日志框架；

* 3.想添加一些新的日志功能？异步模式？自动归档？

* 4.JDBC-数据库驱动

	统一的接口层（日志的一个抽象层）：logging-abstract.jar;给项目中导入具体的日志实现就行，之前的日志框架都是实现的这个抽象层；

**市面上的日志框架：**JUL，JCL，Jboss-logging,logback,log4j,log4g2...

| 日志门面（日志的抽象层）                            | 日志实现                                       |
| --------------------------------------------------- | ---------------------------------------------- |
| ~~JCL（不在更新了）~~,  SLF4j  ,  ~~jboss-logging~~ | Log4j, JUL(java.util.logging), Log4g2, Logback |

选择一个日志门面（SLF4j）+一个日志实现（logback）；

SpringBoot:底层是Spring框架，Spring框架默认的是JCL；
	SpringBoot默认的是SLF4J和LogBack；

# 2.SLF4J的使用

## 1.如何在系统中使用SLF4j

以后开发的时候，日志记录方法的调用，不应该直接调用日志的实现类，而是调用日志抽象层里面的方法；
给系统里面导入slf4j和logback的实现jar

```java
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class HelloWorld {
  public static void main(String[] args) {
    Logger logger = LoggerFactory.getLogger(HelloWorld.class);
    logger.info("Hello World");
  }
}
```

每一个日志的实现框架都有自己的配置文件，使用了slf4j之后，配置文件还是做成日志实现框架的配置文件；

![image-20201227220200392](https://bevishe.oss-cn-hangzhou.aliyuncs.com/img/image-20201227220200392.png)

## 2.遗留问题

a(slf4j+logback):Spring(commons-loggging), Hibernate(jboss-logging)  Mybatis XXX

统一日志框架，即使是别的框架也和我使用统一使用SLF4f进行输出

参考网址：http://www.slf4j.org/legacy.html
**如何让系统中所有的日志都统一到slf4f：**

* 1.将系统中其他日志框架都先排除出去；
* 2.用中间包来替换原有的日志框架；
* 3.在来导入slf4f其他的实现；

# 3.SpringBoot项目的日志

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>

```

SpringBoot使用它来使用日志功能：

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-logging</artifactId>
    <version>2.4.1</version>
    <scope>compile</scope>
</dependency>
```

底层依赖关系：

![image-20201227221710842](https://bevishe.oss-cn-hangzhou.aliyuncs.com/img/image-20201227221710842.png)

总结：

* 1.SpringBoot底层也是使用slf4j+logback进行日志记录

* 2.SpringBoot也考虑到了其他日志都转换成了slf4f；

* 3.中间的替换包

* 4.如果我们要引入其他框架？一定要把和这个框架的默认日志框架移除掉。

	spring框架使用的是commons-logging

	![image-20201228170253896](https://bevishe.oss-cn-hangzhou.aliyuncs.com/img/image-20201228170253896.png)

**新版本没有了，SpringBoot能自动配置所有的日志，而且底层使用slf4f+logback的方式记录日志，引入其他框架的时候只需要将其他默认的日志框架移除掉就ok**

# 4.日志使用

SpringBoot默认已经配置好了日志

```java
    // 记录器
    Logger logger = LoggerFactory.getLogger(getClass());

    @Test
    void contextLoads() {

        // 日志级别
        // 由低到高 trace debug info warn error
        // 可以调整输出的日志级别
        logger.trace("这是trace日志。。。");
        logger.debug("这是debug日志");
        // SpringBoot默认输出的是info级别的日志,没有指定级别的就用SpringBoot默认级别，root级别
        logger.info("这是·info日志");
        logger.warn("这是warning信息");
        logger.error("这是错误日志");

    }
```

配置文件

```properties
logging.level.com.cqupt=trace

```

**日志实例格式:SpringBoot的默认日志实例：**
![image-20201228213638403](https://bevishe.oss-cn-hangzhou.aliyuncs.com/img/image-20201228213638403.png)

指定配置：在类路径下放上每个日志框架的自己的配置文件，框架就不会使用默认的日志配置文件

![image-20201229124256606](https://bevishe.oss-cn-hangzhou.aliyuncs.com/img/image-20201229124256606.png)

logback:会直接被日志框架识别了,如果使用back-spring.xml:日志框架不直接加载日志的配置项由springBoot来加载，可以指定某段配置只在某个环境下生效。

# 5.切换日志框架

